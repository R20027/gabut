<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ular Jadul ‚Äî Skin: Gajah / Harimau / Lainnya</title>
  <style>
    :root{
      --bg:#0f1724; /* deep navy */
      --panel:#0b1220cc;
      --glass: rgba(255,255,255,0.04);
      --accent:#56d6a3;
      --muted:#9aa7c0;
      --tile: #0a1220;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{
      background: radial-gradient(1200px 600px at 10% 10%, #04202a33, transparent), radial-gradient(900px 400px at 90% 90%, #1a073833, transparent), var(--bg);
      color:#e6eef8;
      display:flex;align-items:center;justify-content:center;padding:24px;
    }

    .wrap{
      width:960px;max-width:100%;display:grid;grid-template-columns:480px 1fr;gap:20px;align-items:start;
    }

    .card{background:linear-gradient(180deg,var(--panel), rgba(10,15,25,0.55));border-radius:14px;padding:16px;box-shadow:0 8px 30px rgba(2,6,23,0.6);}

    header h1{margin:0;font-size:20px;letter-spacing:0.2px}
    header p{margin:6px 0 12px;color:var(--muted);font-size:13px}

    /* canvas panel */
    .game-area{display:flex;flex-direction:column;gap:12px;align-items:center}
    .board-wrap{background:linear-gradient(180deg,#071625, #071826 60%);padding:12px;border-radius:12px}
    canvas{display:block;background:repeating-linear-gradient(45deg, rgba(255,255,255,0.02) 0 20px, transparent 20px 40px);border-radius:8px}

    /* right panel */
    .controls{display:flex;flex-direction:column;gap:12px}
    label{font-size:13px;color:var(--muted)}

    .skin-list{display:flex;gap:8px;flex-wrap:wrap}
    .skin{cursor:pointer;padding:8px;border-radius:10px;background:var(--glass);min-width:90px;display:flex;flex-direction:column;align-items:center;gap:6px;transition:transform .12s ease, box-shadow .12s}
    .skin:hover{transform:translateY(-4px)}
    .skin.selected{box-shadow:0 8px 18px rgba(0,0,0,0.6);outline:2px solid rgba(255,255,255,0.03)}
    .skin .preview{width:44px;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px}
    .skin .name{font-size:13px}

    .status-row{display:flex;gap:12px;align-items:center}
    .stat{background:var(--glass);padding:8px 12px;border-radius:10px;font-size:14px}

    .btn{background:linear-gradient(180deg,var(--accent),#37b989);border:none;color:#03221a;padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    .footer{font-size:12px;color:var(--muted);}

    /* mobile control pad */
    .dpad{display:none;margin-top:8px;gap:8px}
    .dpad .row{display:flex;justify-content:center;gap:8px}
    .dpad button{width:52px;height:52px;border-radius:10px;border:none;background:var(--glass);font-size:20px}

    @media(max-width:900px){
      .wrap{grid-template-columns:1fr;}
      .dpad{display:flex}
    }

    /* skin backgrounds */
    .skin-elephant .preview{background:linear-gradient(180deg,#9aa7b4,#6f808f);}
    .skin-tiger .preview{background:repeating-linear-gradient( -45deg, #ffb366 0 8px, #ffb366 8px 16px, #2b1b0b 16px 24px);}
    .skin-classic .preview{background:linear-gradient(180deg,#56d6a3,#1ca774)}
    .skin-panda .preview{background:linear-gradient(180deg,#fff,#ddd);color:#111}

  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <h1>Ular Jadul ‚Äî Versi Modern</h1>
        <p>Gunakan panah atau WASD. Pilih skin, ubah kecepatan, lalu tekan Start. Cocok dibuka di VSCode (simpan sebagai <code>index.html</code> dan buka dengan Live Server).</p>
      </header>

      <div class="game-area">
        <div class="board-wrap">
          <canvas id="board" width="480" height="480"></canvas>
        </div>

        <div style="width:100%;display:flex;justify-content:space-between;align-items:center">
          <div class="status-row">
            <div class="stat">Score: <span id="score">0</span></div>
            <div class="stat">Level: <span id="level">1</span></div>
            <div class="stat">Speed: <span id="speedLabel">Normal</span></div>
          </div>

          <div style="display:flex;gap:8px">
            <button class="btn" id="startBtn">Start</button>
            <button class="btn ghost" id="pauseBtn">Pause</button>
            <button class="btn ghost" id="resetBtn">Reset</button>
          </div>
        </div>

        <div class="dpad" aria-hidden="true">
          <div class="row"><button data-dir="up">‚ñ≤</button></div>
          <div class="row"><button data-dir="left">‚óÄ</button><div style="width:8px"></div><button data-dir="right">‚ñ∂</button></div>
          <div class="row"><button data-dir="down">‚ñº</button></div>
        </div>

      </div>
    </div>

    <div class="card controls">
      <div>
        <label>Pilih Skin</label>
        <div class="skin-list" id="skins">
          <div class="skin skin-classic selected" data-skin="classic" title="Klasik (hijau)">
            <div class="preview">üêç</div>
            <div class="name">Klasik</div>
          </div>

          <div class="skin skin-tiger" data-skin="tiger" title="Harimau">
            <div class="preview">üêØ</div>
            <div class="name">Harimau</div>
          </div>

          <div class="skin skin-elephant" data-skin="elephant" title="Gajah">
            <div class="preview">üêò</div>
            <div class="name">Gajah</div>
          </div>

          <div class="skin skin-panda" data-skin="panda" title="Panda">
            <div class="preview">üêº</div>
            <div class="name">Panda</div>
          </div>

        </div>
      </div>

      <div>
        <label>Kecepatan</label>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn ghost" data-speed="0.6">Lambat</button>
          <button class="btn" data-speed="1">Normal</button>
          <button class="btn ghost" data-speed="1.6">Cepat</button>
        </div>
      </div>

      <div>
        <label>Pengaturan Lain</label>
        <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn ghost" id="toggleGrid">Toggle Grid</button>
          <button class="btn ghost" id="toggleWalls">Toggle Walls</button>
        </div>
      </div>

      <div style="margin-top:8px">
        <label>Kontrol</label>
        <p style="margin:6px 0;color:var(--muted)">Panah / WASD untuk pindah. Tombol di layar untuk mobile.</p>
      </div>

      <div class="footer">Tip: Anda bisa mengganti skin saat bermain ‚Äî ular akan berubah tampilan segera.</div>
    </div>

  </div>

  <script>
    // ======= GAME CONFIG =======
    const canvas = document.getElementById('board');
    const ctx = canvas.getContext('2d');
    const tileCount = 20; // grid size
    let tileSize = canvas.width / tileCount;

    // Game state
    let snake = [{x:9,y:10},{x:8,y:10},{x:7,y:10}];
    let dir = {x:1,y:0};
    let nextDir = null;
    let apple = {x:15,y:10};

    let score = 0;
    let level = 1;
    let baseSpeed = 1; // multiplier
    let gameInterval = null;
    let intervalMs = 140; // base ms
    let running = false;
    let showGrid = true;
    let wallsActive = true;

    // skins definitions (drawing functions)
    const skins = {
      classic: {
        name: 'Klasik',
        draw: (ctx,x,y,size,segmentIndex)=>{
          // gradient green
          const g = ctx.createLinearGradient(x,y,x+size,y+size);
          g.addColorStop(0,'#6fe8b1');g.addColorStop(1,'#1ca774');
          ctx.fillStyle = g;
          roundRect(ctx,x,y,size,size,4,true);
        }
      },
      tiger: {
        name: 'Harimau',
        draw: (ctx,x,y,size,segmentIndex)=>{
          // orange base
          ctx.fillStyle = '#ffb366';
          roundRect(ctx,x,y,size,size,4,true);
          // stripes
          ctx.fillStyle = '#2b1b0b';
          ctx.fillRect(x+size*0.12,y+size*0.12,size*0.08,size*0.7);
          ctx.fillRect(x+size*0.38,y+size*0.05,size*0.08,size*0.6);
          ctx.fillRect(x+size*0.66,y+size*0.2,size*0.08,size*0.5);
        }
      },
      elephant: {
        name: 'Gajah',
        draw: (ctx,x,y,size,segmentIndex)=>{
          // grey base
          ctx.fillStyle = '#98a3ad';
          roundRect(ctx,x,y,size,size,6,true);
          // simple tusk on head
          if(segmentIndex===0){
            ctx.fillStyle = '#fff';
            ctx.fillRect(x+size*0.75,y+size*0.45,size*0.12,size*0.06);
          }
        }
      },
      panda: {
        name: 'Panda',
        draw: (ctx,x,y,size,segmentIndex)=>{
          // body white
          ctx.fillStyle = '#ffffff';
          roundRect(ctx,x,y,size,size,6,true);
          // black patches
          ctx.fillStyle = '#1b1b1b';
          if(segmentIndex % 3 === 0){
            ctx.fillRect(x+size*0.05,y+size*0.6,size*0.28,size*0.18);
            ctx.fillRect(x+size*0.65,y+size*0.6,size*0.28,size*0.18);
          }
          if(segmentIndex===0){ctx.fillRect(x+size*0.18,y+size*0.08,size*0.22,size*0.14);ctx.fillRect(x+size*0.6,y+size*0.08,size*0.22,size*0.14)}
        }
      }
    };

    let currentSkin = 'classic';

    // UI elements
    const scoreEl = document.getElementById('score');
    const levelEl = document.getElementById('level');
    const speedLabel = document.getElementById('speedLabel');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');

    // ------- Helpers -------
    function roundRect(ctx, x, y, w, h, r, fill){
      ctx.beginPath();ctx.moveTo(x+r,y);
      ctx.arcTo(x+w,y,x+w,y+h,r);
      ctx.arcTo(x+w,y+h,x,y+h,r);
      ctx.arcTo(x,y+h,x,y,r);
      ctx.arcTo(x,y,x+w,y,r);
      ctx.closePath();
      if(fill)ctx.fill();else ctx.stroke();
    }

    function randomGrid(){
      return {x:Math.floor(Math.random()*tileCount), y:Math.floor(Math.random()*tileCount)};
    }

    function placeApple(){
      let pos = randomGrid();
      while(snake.some(s=>s.x===pos.x && s.y===pos.y)) pos = randomGrid();
      apple = pos;
    }

    function resetGame(){
      snake = [{x:9,y:10},{x:8,y:10},{x:7,y:10}];
      dir = {x:1,y:0}; nextDir = null;
      score = 0; level = 1; baseSpeed = 1; intervalMs = 140;
      running = false;
      placeApple();
      updateUI();
      draw();
    }

    function updateUI(){scoreEl.textContent = score;levelEl.textContent = level;}

    // draw grid optional
    function drawGrid(){
      ctx.save();
      ctx.strokeStyle = 'rgba(255,255,255,0.03)';
      ctx.lineWidth = 1;
      for(let i=0;i<=tileCount;i++){
        ctx.beginPath();ctx.moveTo(i*tileSize,0);ctx.lineTo(i*tileSize,canvas.height);ctx.stroke();
        ctx.beginPath();ctx.moveTo(0,i*tileSize);ctx.lineTo(canvas.width,i*tileSize);ctx.stroke();
      }
      ctx.restore();
    }

    // draw the apple
    function drawApple(){
      const x = apple.x*tileSize; const y = apple.y*tileSize;
      ctx.beginPath();ctx.fillStyle='#ff4757';
      ctx.ellipse(x+tileSize*0.5,y+tileSize*0.5,tileSize*0.36,tileSize*0.36,0,0,Math.PI*2);
      ctx.fill();
      ctx.fillStyle='#fff';ctx.fillRect(x+tileSize*0.6,y+tileSize*0.25,tileSize*0.08,tileSize*0.12);
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // background shading
      ctx.fillStyle = 'rgba(0,0,0,0.15)';
      ctx.fillRect(0,0,canvas.width,canvas.height);

      if(showGrid) drawGrid();

      // apple
      drawApple();

      // snake
      const skin = skins[currentSkin] || skins.classic;
      for(let i=0;i<snake.length;i++){
        const s = snake[i];
        const x = s.x*tileSize + 2; const y = s.y*tileSize + 2; const size = tileSize - 4;
        skin.draw(ctx,x,y,size,i);
      }

      // overlay score small
      ctx.fillStyle = 'rgba(0,0,0,0.35)';
      ctx.fillRect(8,8,120,36);
      ctx.fillStyle = '#fff';ctx.font = '14px system-ui';ctx.fillText('Score: '+score,16,32);
    }

    // game tick
    function tick(){
      // apply queued direction safely
      if(nextDir){
        if(!(nextDir.x === -dir.x && nextDir.y === -dir.y)) dir = nextDir;
        nextDir = null;
      }

      // compute new head
      const head = {x:snake[0].x + dir.x, y:snake[0].y + dir.y};

      // wall behavior
      if(wallsActive){
        if(head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount){
          gameOver();return;
        }
      } else {
        // wrap
        if(head.x < 0) head.x = tileCount-1;
        if(head.x >= tileCount) head.x = 0;
        if(head.y < 0) head.y = tileCount-1;
        if(head.y >= tileCount) head.y = 0;
      }

      // collision with self
      if(snake.some(s=>s.x===head.x && s.y===head.y)) {gameOver();return}

      // add new head
      snake.unshift(head);

      // apple eaten?
      if(head.x === apple.x && head.y === apple.y){
        score += 10; if(score % 50 === 0) level++;
        // speed up slightly with level
        intervalMs = Math.max(45, 140 / (1 + (level-1)*0.08) / baseSpeed);
        placeApple();
      } else {
        snake.pop();
      }

      updateUI();
      draw();
    }

    function gameOver(){
      running = false;clearInterval(gameInterval);
      draw();
      setTimeout(()=>{
        if(confirm('Game over! Skor: '+score+"\nMulai lagi?")){
          resetGame();startGame();
        }
      },80);
    }

    // controls
    window.addEventListener('keydown', e=>{
      if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','w','a','s','d','W','A','S','D'].includes(e.key)){
        e.preventDefault();
      }
      if(e.key === 'ArrowUp' || e.key === 'w' || e.key === 'W') nextDir = {x:0,y:-1};
      if(e.key === 'ArrowDown' || e.key === 's' || e.key === 'S') nextDir = {x:0,y:1};
      if(e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') nextDir = {x:-1,y:0};
      if(e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') nextDir = {x:1,y:0};
      if(e.key === ' '){ // space to pause
        togglePause();
      }
    });

    // mobile dpad
    document.querySelectorAll('.dpad button').forEach(b=>{
      b.addEventListener('click',()=>{
        const d = b.dataset.dir;
        if(d==='up') nextDir = {x:0,y:-1};
        if(d==='down') nextDir = {x:0,y:1};
        if(d==='left') nextDir = {x:-1,y:0};
        if(d==='right') nextDir = {x:1,y:0};
      });
    });

    // buttons
    startBtn.addEventListener('click', ()=>{ if(!running) startGame(); else { /* restart */ resetGame(); startGame(); } });
    pauseBtn.addEventListener('click', togglePause);
    resetBtn.addEventListener('click', ()=>{ resetGame(); });

    function startGame(){
      if(running) return;
      running = true;
      intervalMs = Math.max(40, 140 / baseSpeed / (1 + (level-1)*0.08));
      clearInterval(gameInterval);
      gameInterval = setInterval(tick, intervalMs);
    }

    function togglePause(){
      if(!running){ startGame(); pauseBtn.textContent = 'Pause'; return; }
      running = false; clearInterval(gameInterval); pauseBtn.textContent = 'Resume';
    }

    // skins UI
    document.getElementById('skins').addEventListener('click', e=>{
      const skinEl = e.target.closest('.skin');
      if(!skinEl) return;
      document.querySelectorAll('.skin').forEach(s=>s.classList.remove('selected'));
      skinEl.classList.add('selected');
      currentSkin = skinEl.dataset.skin;
      draw();
    });

    // speed buttons
    document.querySelectorAll('[data-speed]').forEach(b=>{
      b.addEventListener('click', ()=>{
        document.querySelectorAll('[data-speed]').forEach(x=>x.classList.add('ghost'));
        b.classList.remove('ghost');
        baseSpeed = parseFloat(b.dataset.speed);
        speedLabel.textContent = baseSpeed === 0.6 ? 'Lambat' : (baseSpeed===1 ? 'Normal' : 'Cepat');
        if(running){ clearInterval(gameInterval); gameInterval = setInterval(tick, Math.max(40, 140/baseSpeed/(1+(level-1)*0.08)) ); }
      });
    });

    // toggles
    document.getElementById('toggleGrid').addEventListener('click', ()=>{ showGrid = !showGrid; draw(); });
    document.getElementById('toggleWalls').addEventListener('click', ()=>{ wallsActive = !wallsActive; alert('Walls: '+(wallsActive? 'Active' : 'Wrap')) });

    // responsive resize
    window.addEventListener('resize', ()=>{
      // keep canvas square and responsive ‚Äî canvas size fixed here but tileSize recalculated
      const size = Math.min(480, Math.floor((Math.min(window.innerWidth, window.innerHeight)-80)/1.8));
      canvas.width = canvas.height = Math.max(320, size);
      tileSize = canvas.width / tileCount;
      draw();
    });

    // initial
    placeApple();
    updateUI();
    draw();

    // hint: to run in VSCode ‚Äî save this file as index.html and open with Live Server extension or open file in browser.
  </script>
</body>
</html>
